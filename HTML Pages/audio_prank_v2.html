<!DOCTYPE html>
<html>
<head>
<title>Wi-Fi Access</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body, html {
  height: 100%;
  margin: 0;
  font-family: Arial, sans-serif;
  background-color: #f0f0f0;
}

.loader {
  border: 8px solid #f3f3f3; /* Light grey */
  border-top: 8px solid #3098ff; /* Blue */
  border-radius: 50%;
  width: 60px;
  height: 60px;
  animation: spin 2s linear infinite;
  position: absolute;
  top: 50%;
  left: 50%;
  margin-top: -30px;
  margin-left: -30px;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.content {
  display: none; /* Hide content until page is loaded */
  text-align: center;
  padding-top: 50px;
}

.button {
  background-color: #3098ff; /* Blue */
  border: none;
  color: white;
  padding: 15px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  border-radius: 8px;
  cursor: pointer;
  margin-top: 20px;
}

img {
  width: 200px;
  height: 200px;
  object-fit: cover; /* Prevents image distortion */
  border-radius: 8px;
}
</style>
</head>
<body>

<div id="loader" class="loader"></div>

<div id="mainContent" class="content">
    <img id="prankImage" src="" alt="Prank Image">
    
    <audio id="audio">
      <source id="prankAudioSource" src="" type="audio/mpeg">
      Your browser does not support the audio element.
    </audio>

    <p>Tekan mulai untuk menggunakan Wi-Fi</p>

    <button id="playbutton" class="button" onclick="playAudio()">Mulai</button>
</div>

<script>
// --- MODIFIED SCRIPT FOR CACHE BUSTING ---
// Use the current time (in milliseconds) as a unique query string
var cacheBuster = new Date().getTime();

// Set the image source with the cache buster
var prankImage = document.getElementById("prankImage");
prankImage.src = "/prank_image.png?" + cacheBuster;

// Set the audio source with the cache buster
var prankAudioSource = document.getElementById("prankAudioSource");
prankAudioSource.src = "/prank_audio.mp3?" + cacheBuster;

var x = document.getElementById("audio"); 

// Reload the audio element to apply the new source
x.load();

// Show content and hide loader once everything is loaded
window.onload = function() {
  document.getElementById("loader").style.display = "none";
  document.getElementById("mainContent").style.display = "block";
};

function playAudio() { 
  document.getElementById("playbutton").style.display = "none";  
  x.play();
} 

function pauseAudio() { 
  x.pause(); 
} 
</script>

</body>
</html>